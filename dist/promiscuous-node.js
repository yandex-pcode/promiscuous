/**@license MIT-promiscuous-Â©Ruben Verborgh*/
(function(n,t){function c(n,t){return(typeof t)[0]==n}function u(o,e){return e=function f(i,h,a,l,p,s){function m(n){return function(t){p&&(p=0,f(c,n,t))}}if(l=f.q,i!=c)return u(function(n,t){l.push({p:this,r:n,j:t,1:i,0:h})});if(a&&c(n,a)|c(t,a))try{p=a.then}catch(y){h=0,a=y}if(c(n,p))try{p.call(a,m(1),h=m(0))}catch(y){h(y)}else for(e=function(t,e){return c(n,t=h?t:e)?u(function(n,c){r(this,n,c,a,t)}):o},s=0;l.length>s;)p=l[s++],c(n,i=p[h])?r(p.p,p.r,p.j,a,i):(h?p.r:p.j)(a)},e.q=[],o.call(o={then:function(n,t){return e(n,t)},"catch":function(n){return e(0,n)}},function(n){e(c,1,n)},function(n){e(c,0,n)}),o}function r(u,r,o,f,i){e(function(){try{f=i(f),i=f&&c(t,f)|c(n,f)&&f.then,c(n,i)?f==u?o(TypeError()):i.call(f,r,o):r(f)}catch(e){o(e)}})}function o(n){return u(function(t){t(n)})}var e=setImmediate;module.exports=u,u.resolve=o,u.reject=function(n){return u(function(t,c){c(n)})},u.all=function(n){return u(function(t,c,u,r){r=[],u=n.length||t(r),n.map(function(n,e){o(n).then(function(n){r[e]=n,--u||t(r)},c)})})},u.race=function(n){return u(function(t,c){n.map(function(n){o(n).then(t,c)})})}})("f","o");